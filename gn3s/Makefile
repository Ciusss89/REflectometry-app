#------------------------------------------------------------------------------#
# This makefile was generated by 'cbp2make' tool rev.137                       #
#------------------------------------------------------------------------------#

# This makefile was custumized by Giuseppe Tipaldi [ giuseppe.tipaldi@studenti.polito.it ]

WORKDIR = `pwd`

### IMPORTATO
AS              = $(CROSS_COMPILE)as
CPP             = $(CC) -E
NM              = $(CROSS_COMPILE)nm
STRIP           = $(CROSS_COMPILE)strip
OBJCOPY         = $(CROSS_COMPILE)objcopy
OBJDUMP         = $(CROSS_COMPILE)objdump
AWK             = awk
GENKSYMS        = scripts/genksyms/genksyms
DEPMOD          = /sbin/depmod
KALLSYMS        = scripts/kallsyms
PERL            = perl
CHECK           = sparse


#CC = gcc
CC              = $(CROSS_COMPILE)gcc
CXX = g++
#AR = ar
AR              = $(CROSS_COMPILE)ar
#LD = g++
LD              = $(CROSS_COMPILE)ld
WINDRES = windres

INC = 
CFLAGS =  -Wall -fexceptions
RESINC = 
LIBDIR = 
LIB = 
LDFLAGS = 

INC_RELEASE =  $(INC)
CFLAGS_RELEASE =  $(CFLAGS) -O2
RESINC_RELEASE =  $(RESINC)
RCFLAGS_RELEASE =  $(RCFLAGS)
LIBDIR_RELEASE =  $(LIBDIR)
LIB_RELEASE = $(LIB)
LDFLAGS_RELEASE =  $(LDFLAGS) -s
OBJDIR_RELEASE = obj/Release
DEP_RELEASE = 
OUT_RELEASE = bin/Release/gn3s

PREFIX=/usr/local/

OBJ_RELEASE = $(OBJDIR_RELEASE)/main.o $(OBJDIR_RELEASE)/fx2.o $(OBJDIR_RELEASE)/fusb_sysconfig_linux.o $(OBJDIR_RELEASE)/fusb_linux.o $(OBJDIR_RELEASE)/cir_buf.o $(OBJDIR_RELEASE)/fusb.o $(OBJDIR_RELEASE)/filesaver.o $(OBJDIR_RELEASE)/driver-dependence/usb.o $(OBJDIR_RELEASE)/driver-dependence/linux.o $(OBJDIR_RELEASE)/driver-dependence/error.o $(OBJDIR_RELEASE)/driver-dependence/descriptors.o

all: clean_release release

clean: clean_release

install: install_step

before_release: 
	test -d bin/Release || mkdir -p bin/Release
	test -d $(OBJDIR_RELEASE) || mkdir -p $(OBJDIR_RELEASE)
	test -d $(OBJDIR_RELEASE)/driver-dependence || mkdir -p $(OBJDIR_RELEASE)/driver-dependence

after_release: 

release: before_release out_release after_release

out_release: $(OBJ_RELEASE) $(DEP_RELEASE)
	$(LD) $(LDFLAGS_RELEASE) $(LIBDIR_RELEASE) $(OBJ_RELEASE) $(LIB_RELEASE) -o $(OUT_RELEASE)

$(OBJDIR_RELEASE)/main.o: main.cpp
	$(CXX) $(CFLAGS_RELEASE) $(INC_RELEASE) -c main.cpp -o $(OBJDIR_RELEASE)/main.o

$(OBJDIR_RELEASE)/fx2.o: fx2.cpp
	$(CXX) $(CFLAGS_RELEASE) $(INC_RELEASE) -c fx2.cpp -o $(OBJDIR_RELEASE)/fx2.o

$(OBJDIR_RELEASE)/fusb_sysconfig_linux.o: fusb_sysconfig_linux.cc
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c fusb_sysconfig_linux.cc -o $(OBJDIR_RELEASE)/fusb_sysconfig_linux.o

$(OBJDIR_RELEASE)/fusb_linux.o: fusb_linux.cc
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c fusb_linux.cc -o $(OBJDIR_RELEASE)/fusb_linux.o

$(OBJDIR_RELEASE)/cir_buf.o: cir_buf.cpp
	$(CXX) $(CFLAGS_RELEASE) $(INC_RELEASE) -c cir_buf.cpp -o $(OBJDIR_RELEASE)/cir_buf.o

$(OBJDIR_RELEASE)/fusb.o: fusb.cc
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c fusb.cc -o $(OBJDIR_RELEASE)/fusb.o

$(OBJDIR_RELEASE)/filesaver.o: filesaver.cpp
	$(CXX) $(CFLAGS_RELEASE) $(INC_RELEASE) -c filesaver.cpp -o $(OBJDIR_RELEASE)/filesaver.o

$(OBJDIR_RELEASE)/driver-dependence/usb.o: driver-dependence/usb.c
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c driver-dependence/usb.c -o $(OBJDIR_RELEASE)/driver-dependence/usb.o

$(OBJDIR_RELEASE)/driver-dependence/linux.o: driver-dependence/linux.c
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c driver-dependence/linux.c -o $(OBJDIR_RELEASE)/driver-dependence/linux.o

$(OBJDIR_RELEASE)/driver-dependence/error.o: driver-dependence/error.c
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c driver-dependence/error.c -o $(OBJDIR_RELEASE)/driver-dependence/error.o

$(OBJDIR_RELEASE)/driver-dependence/descriptors.o: driver-dependence/descriptors.c
	$(CC) $(CFLAGS_RELEASE) $(INC_RELEASE) -c driver-dependence/descriptors.c -o $(OBJDIR_RELEASE)/driver-dependence/descriptors.o

clean_release: 
	rm -f $(OBJ_RELEASE) $(OUT_RELEASE)
	rm -rf bin/Release
	rm -rf $(OBJDIR_RELEASE)
	rm -rf $(OBJDIR_RELEASE)/driver-dependence

install_step: 
	install -s -m 0755 ${OUT_RELEASE} ${PREFIX}bin/

.PHONY: before_release after_release clean_release

